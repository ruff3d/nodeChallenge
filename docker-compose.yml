version: '3.7'
services:

    reviews:
        build: .
        image: node:adidas
        command: npm run start:revirews
        environment:
            NODE_ENV: development
            PORT: 3027
        ports:
            - 3027:3027
        depends_on:
            - mysql
            - mongo

    products:
        image: node:adidas
        command: npm run start:product
        environment:
            NODE_ENV: development
            PORT: 3029
        ports:
            - 3029:3029
        depends_on:
            - reviews

    mysql:
        image: mysql
        restart: always
        environment:
            MYSQL_ROOT_PASSWORD: rootroot
            MYSQL_DATABASE: product

    mongo:
        image: mongo
        restart: always
        environment:
            MONGO_INITDB_ROOT_USERNAME: root
            MONGO_INITDB_ROOT_PASSWORD: rootroot
